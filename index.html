<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>とある未来への招待状</title>

<style>
body{
  font-family:sans-serif;
  background:#111;
  color:white;
  text-align:center;
  padding:40px 20px;
  line-height:1.8;
}
.hidden{display:none;}

.fade{
  opacity:0;
  transition:opacity 0.8s ease;
}
.fade.show{
  opacity:1;
}

input{
  padding:10px;
  margin-top:15px;
  border-radius:5px;
  border:none;
  font-size:16px;
}
button{
  padding:10px 25px;
  margin-top:20px;
  border:none;
  border-radius:20px;
  background:#ffffff;
  color:#111;
  cursor:pointer;
}
button:hover{
  opacity:0.8;
}
h1{
  margin-bottom:40px;
}

.rotateHint{
  margin-top:50px;
  height:200px;
}

.hiddenWord{
  font-size:28px;
  letter-spacing:8px;
  opacity:0;
}

/* 横向きのときだけ表示 */
@media screen and (orientation: landscape) {
  .hiddenWord{
    opacity:1;
  }
}

/* 鍵獲得メッセージ */
#message{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  background:white;
  color:#111;
  padding:30px 50px;
  border-radius:20px;
  font-size:22px;
  z-index:1000;
  opacity:0;
  transition:opacity 0.6s ease;
}
#message.show{
  opacity:1;
}
</style>
</head>
<body>

<h1>とある未来への招待状</h1>

<div id="passwordBox">
<p>この招待状には、合言葉が必要です。</p>
<input id="passwordInput" placeholder="合言葉を入力">
<br>
<button onclick="checkPassword()">開く</button>
</div>

<div id="mainContent" class="hidden fade">

<h2>第一章</h2>

<p>
特別な日にだけ届く「未来へ進むための招待状」。<br><br>
この招待状を開いたあなたには、<br>
鍵を集める資格がある。<br><br>
すべて揃ったとき、次の扉が開く。
</p>

<button id="startBtn" onclick="showQ1()">はじめる</button>

<div id="q1" class="hidden fade">
<h2>Q1</h2>
<p>
形を変えながら、姿を保ち続けるものがある。<br><br>
氷 ⇒ 〇 ⇒ 蒸気<br><br>
空欄に入るものをひらがなで答えよ。
</p>
<input id="a1">
<button onclick="checkQ1()">答える</button>
</div>

<div id="q2" class="hidden fade">
<h2>Q2</h2>
<p>
火・太陽・インフル。<br><br>
これらに共通するものを、ひらがなで答えよ。
</p>
<input id="a2">
<button onclick="checkQ2()">答える</button>
</div>

<div id="q3" class="hidden fade">
<h2>Q3</h2>
<p>
最後の鍵は、この画面の中に隠されています。
</p>

<div class="rotateHint">
  <p class="hiddenWord">かぜ</p>
</div>

<input id="a3" placeholder="見つけた鍵を入力">
<br>
<button onclick="checkQ3()">答える</button>
</div>

<div id="final" class="hidden fade">
<h2>最終問題</h2>
<p>
三つの鍵は揃った。<br><br>
招待状が示す場所では、<br>
それらを順に体験することになる。<br><br>
三つの力を、<br>
あなたが体験したい順に並び替えよ。
</p>
<input id="finalAnswer">
<button onclick="checkFinal()">答える</button>
</div>

</div>

<div id="message"></div>

<script>

function showSection(nextId,currentId,messageText){
  const msg = document.getElementById("message");
  msg.innerText = messageText;
  msg.classList.add("show");

  setTimeout(()=>{
    msg.classList.remove("show");

    if(currentId){
      document.getElementById(currentId).classList.add("hidden");
    }

    const next = document.getElementById(nextId);
    next.classList.remove("hidden");
    setTimeout(()=>{ next.classList.add("show"); },10);

  },1200);
}

function checkPassword(){
  const password = document.getElementById("passwordInput").value;
  if(password === "20250916"){
    document.getElementById("passwordBox").classList.add("hidden");
    const main = document.getElementById("mainContent");
    main.classList.remove("hidden");
    setTimeout(()=>{ main.classList.add("show"); },10);
  } else {
    alert("合言葉が違います");
  }
}

function showQ1(){
  document.getElementById("startBtn").classList.add("hidden");
  const q1 = document.getElementById("q1");
  q1.classList.remove("hidden");
  setTimeout(()=>{ q1.classList.add("show"); },10);
}

function checkQ1(){
  if(document.getElementById("a1").value === "みず"){
    showSection("q2","q1","第一の鍵を獲得");
  } else alert("ちがいます");
}

function checkQ2(){
  if(document.getElementById("a2").value === "ねつ"){
    showSection("q3","q2","第二の鍵を獲得");
  } else alert("ちがいます");
}

function checkQ3(){
  if(document.getElementById("a3").value === "かぜ"){
    showSection("final","q3","第三の鍵を獲得");
  } else alert("ちがいます");
}

function checkFinal(){
  if(document.getElementById("finalAnswer").value === "ねつみずかぜ"){
    showSection(null,null,"すべての鍵が揃った");
    setTimeout(()=>{
      window.location.href = "https://宿泊先のURL";
    },1500);
  } else alert("順番をもう一度考えてみてください");
}

</script>

</body>
</html>
